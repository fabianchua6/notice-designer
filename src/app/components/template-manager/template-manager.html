<div class="template-manager-container">
  <!-- Page Header -->
  <div class="page-header">
    <div class="header-content">
      <div class="header-text">
        <h1>Master Templates</h1>
        <p class="subtitle">Reusable notice templates for quick document creation</p>
      </div>
      <div class="header-actions">
        <iras-button variant="primary" icon="add" (click)="createNewTemplate()">
          Create Template
        </iras-button>
      </div>
    </div>
  </div>
  
  <!-- Category Filter -->
  <div class="category-filter">
    <iras-button 
      variant="tertiary" 
      [class.active]="selectedCategory() === 'all'"
      (click)="selectCategory('all')">
      All Templates
    </iras-button>
    @for (cat of categories; track cat.value) {
      <iras-button 
        variant="tertiary" 
        [class.active]="selectedCategory() === cat.value"
        (click)="selectCategory(cat.value)">
        {{ cat.label }}
      </iras-button>
    }
  </div>
  
  <!-- Templates Grid -->
  <div class="templates-grid">
    @for (template of filteredTemplates; track template.id) {
      <iras-card variant="elevated" [hoverable]="true" class="template-card" [class.system]="template.isSystem">
        <!-- Category Badge -->
        <iras-badge variant="info" class="card-badge">
          {{ getCategoryLabel(template.category) }}
        </iras-badge>
        
        @if (template.isSystem) {
          <iras-badge variant="neutral" class="system-badge">
            System
          </iras-badge>
        }
        
        <iras-card-header>
          <h3>{{ template.name }}</h3>
          <p class="subtitle">{{ template.description }}</p>
        </iras-card-header>
        
        <iras-card-content>
          <div class="template-preview">
            <div class="preview-content" [innerHTML]="template.content | slice:0:300"></div>
            <div class="preview-fade"></div>
          </div>
        </iras-card-content>
        
        <iras-card-actions>
          <iras-button variant="primary" icon="add_circle" size="small" (click)="useTemplate(template)">
            Use Template
          </iras-button>
          <iras-button variant="ghost" icon="content_copy" size="small" (click)="duplicateTemplate(template)">
            Duplicate
          </iras-button>
          @if (!template.isSystem) {
            <iras-button variant="ghost" icon="edit" size="small" (click)="editTemplate(template)">
              Edit
            </iras-button>
            <iras-button variant="danger" icon="delete" size="small" (click)="deleteTemplate(template)">
              Delete
            </iras-button>
          }
        </iras-card-actions>
      </iras-card>
    }
  </div>
  
  @if (filteredTemplates.length === 0) {
    <iras-card variant="outlined" class="empty-state">
      <mat-icon>folder_open</mat-icon>
      <h3>No Templates Found</h3>
      <p>No templates match the selected category.</p>
    </iras-card>
  }
</div>
